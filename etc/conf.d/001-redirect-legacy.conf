server {
  listen       80;
  server_name  api.cortexia.ch;

  # Let's Encrypt challenges should be sent to traefik:80
  location /.well-known {
    proxy_pass   http://traefik;
  }

  location / {
    return 301 https://legacy.cortexia.io$request_uri;
  }
}

server {
  listen       80;
  server_name  web.cortexia.ch;
  
  # Let's Encrypt challenges should be sent to traefik:80
  location /.well-known {
    proxy_pass   http://traefik;
  }

  location / {
    return 301 https://web.cortexia.io$request_uri;
  }
}
